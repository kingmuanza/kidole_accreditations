<!DOCTYPE html>
<html>
    <head>
        <title>KIDOLE SPORT</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdn.metroui.org.ua/v4/css/metro-all.min.css">
        <link href="resources/css/app.css" rel="stylesheet" type="text/css"/>
        <style>
            .ombre{
                box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
            }
        </style>
    </head>
    <body style="background-image: url('resources/img/wall.jpg')">
        <div class="grid">
            <div class="row">
                <div class="cell-4">

                </div>
                <div class="cell-4">
                    <div id="div_connexion" class="ombre" style="margin-top: 0px; padding: 30px; border : 1px solid #aaa; background-color: white">
                        <div style="padding: 5px 0px 10px 0px;">
                            <img style="width: 50%" src="resources/img/logo.jfif" alt=""/>
                        </div>
                        <div style="padding-bottom: 10px;">
                            <div class="form-group">
                                <label>Adresse mail</label>
                                <input id="login" type="email" placeholder="Enter email"/>
                            </div>
                            <div class="form-group">
                                <label>Mot de passe</label>
                                <input id="passe" type="password" placeholder="Enter email"/>
                            </div>

                            <div class="form-group">
                                <button onclick="connexion()" class="button success">Connexion</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="cell-4">

                </div>
            </div>
        </div>
        <!-- FIREBASE : Services Cloud -->
        <script src="https://www.gstatic.com/firebasejs/5.9.4/firebase.js"></script>
        <script>
                                    const config = {
                                        apiKey: "AIzaSyDWLj8yYKaue-cW-0k3zuKQt-0tPzkqNK8",
                                        authDomain: "kidole-accreditations.firebaseapp.com",
                                        databaseURL: "https://kidole-accreditations.firebaseio.com",
                                        projectId: "kidole-accreditations",
                                        storageBucket: "kidole-accreditations.appspot.com",
                                        messagingSenderId: "766458675347"
                                    };
                                    firebase.initializeApp(config);
        </script>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="https://cdn.metroui.org.ua/v4/js/metro.min.js"></script>

        <script src="resources/js/angular.min.js" type="text/javascript"></script>
        <script src="resources/js/angular-route.js" type="text/javascript"></script>

        <script>

                                    function connexion() {
                                        var login = $("#login").val();
                                        var passe = $("#passe").val();
                                        console.log(login);
                                        console.log(passe);
                                        $("#div_connexion").animate({'opacity': '0.0'}, 1000);
                                        firebase.auth()
                                                .signInWithEmailAndPassword(login, passe)
                                                .then(function (user) {
                                                    console.log(user);
                                                    var utilisateur = {
                                                        login: login,
                                                        passe: passe
                                                    }
                                                    localStorage.setItem("kidoleUser", JSON.stringify(utilisateur));
                                                    window.location.href = 'app.html'

                                                })
                                                .catch(function (error) {
                                                    $("#div_connexion").animate({'opacity': '1'}, 1000);
                                                });

                                    }

                                    $(document).ready(function () {
                                        console.log("L'application est prÃªte !");

                                        // Effet visuel
                                        $("#div_connexion").animate({'marginTop': '120px'}, 1000);
                                    })
        </script>
    </body>
</html>
